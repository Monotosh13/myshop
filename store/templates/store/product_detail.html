<!DOCTYPE html>
<html>
<head>
    <title>{{ product.name }}</title>

    <script>
        function updatePrice() {
            var select = document.getElementById("variantSelect");
            var price = select.options[select.selectedIndex].getAttribute("data-price");
            document.getElementById("priceDisplay").innerText = "₹" + price;
        }
    </script>
</head>
<body>

<h1>{{ product.name }}</h1>

<img src="{{ product.image.url }}" width="300">

<p>
    <strong>Price:</strong>
    <span id="priceDisplay">
        ₹{{ product.variants.first.price }}
    </span>
</p>

<p>{{ product.description }}</p>

<form method="post" action="{% url 'add_to_cart' product.id %}">
    {% csrf_token %}

    <label>Select Size:</label>
    <select name="variant_id" id="variantSelect" onchange="updatePrice()" required>
        {% for variant in product.variants.all %}
            <option value="{{ variant.id }}" data-price="{{ variant.price }}">
                {{ variant.get_size_display }}
            </option>
        {% endfor %}
    </select>

    <br><br>

    <label>Quantity:</label>
    <input type="number" name="quantity" value="1" min="1">

    <br><br>

    <button type="submit">Add to Cart</button>
</form>

</body>
</html>
